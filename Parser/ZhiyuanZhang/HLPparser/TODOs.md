TODO:
1. add empty cases for function body
2. work on error locations
3. format the output
4. test 

